<!DOCTYPE html>
<html>


<!-- Mirrored from www.zi-han.net/theme/hplus/table_data_tables.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 20 Jan 2016 14:20:01 GMT -->
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>添加商品</title>
    <meta name="keywords" content="H+后台主题,后台bootstrap框架,会员中心主题,后台HTML,响应式后台">
    <meta name="description" content="H+是一个完全响应式，基于Bootstrap3最新版本开发的扁平化主题，她采用了主流的左右两栏式布局，使用了Html5+CSS3等现代技术">

    <link rel="shortcut icon" href="favicon.ico"> <link href="__INDEX__/css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
    <link href="__INDEX__/css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
    <link rel="stylesheet" href="__INDEX__/cations/css/sku_style.css" />
    <script src="__INDEX__/layui/assets/jquery-1.12.4.js"></script>
    <!--<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>-->
    <script type="text/javascript" src="__INDEX__/cations/js/customSku.js"></script>
    <script type="text/javascript" src="__INDEX__/cations/plugins/layer/layer.js"></script>
    <!-- Data Tables -->
    <link href="__INDEX__/css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
    <link href="__INDEX__/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="__INDEX__/css/plugins/chosen/chosen.css" rel="stylesheet">
    <link href="__INDEX__/css/plugins/colorpicker/css/bootstrap-colorpicker.min.css" rel="stylesheet">
    <link href="__INDEX__/css/plugins/cropper/cropper.min.css" rel="stylesheet">
    <link href="__INDEX__/css/plugins/nouslider/jquery.nouislider.css" rel="stylesheet">
    <link href="__INDEX__/css/plugins/datapicker/datepicker3.css" rel="stylesheet">
    <link href="__INDEX__/css/plugins/ionRangeSlider/ion.rangeSlider.css" rel="stylesheet">
    <link href="__INDEX__/css/plugins/ionRangeSlider/ion.rangeSlider.skinFlat.css" rel="stylesheet">
    <link href="__INDEX__/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" rel="stylesheet">
    <link href="__INDEX__/css/plugins/clockpicker/clockpicker.css" rel="stylesheet">
    <link href="__INDEX__/css/animate.min.css" rel="stylesheet">

    <link href="__INDEX__/css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
    <link href="__INDEX__/css/plugins/switchery/switchery.css" rel="stylesheet">
    <link href="__INDEX__/css/plugins/jasny/jasny-bootstrap.min.css" rel="stylesheet">
    <link href="__INDEX__/css/style.min862f.css?v=4.1" rel="stylesheet">

    <script type="text/javascript" charset="utf-8" src="__INDEX__/ueditor/ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="__INDEX__/ueditor/ueditor.all.min.js"></script>
    <script src="__INDEX__/js/bootstrap.min.js?v=3.3.6"></script>
    <script src="__INDEX__/js/content.min.js?v=1.0.0"></script>
    <script src="__INDEX__/js/plugins/chosen/chosen.jquery.js"></script>
    <script src="__INDEX__/js/plugins/jsKnob/jquery.knob.js"></script>
    <script src="__INDEX__/js/plugins/jasny/jasny-bootstrap.min.js"></script>
    <script src="__INDEX__/js/plugins/datapicker/bootstrap-datepicker.js"></script>
    <script src="__INDEX__/js/plugins/prettyfile/bootstrap-prettyfile.js"></script>
    <script src="__INDEX__/js/plugins/nouslider/jquery.nouislider.min.js"></script>
    <script src="__INDEX__/js/plugins/switchery/switchery.js"></script>
    <script src="__INDEX__/js/plugins/ionRangeSlider/ion.rangeSlider.min.js"></script>
    <script src="__INDEX__/js/plugins/iCheck/icheck.min.js"></script>
    <script src="__INDEX__/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="__INDEX__/js/plugins/colorpicker/bootstrap-colorpicker.min.js"></script>
    <script src="__INDEX__/js/plugins/clockpicker/clockpicker.js"></script>
    <script src="__INDEX__/js/plugins/cropper/cropper.min.js"></script>
    <script src="__INDEX__/js/demo/form-advanced-demo.min.js"></script>
    <script type="text/javascript" src="http://tajs.qq.com/stats?sId=9051096" charset="UTF-8"></script>
    <script src="__INDEX__/laydate/laydate.js"></script>
    <link rel="stylesheet" type="text/css" href="__INDEX__/layui2/css/layui.css">
    <script type="text/javascript" src="__INDEX__/layui2/layui.js"></script>
    <script type="text/javascript" src="__INDEX__/layui/assets/data.js"></script>
    <script type="text/javascript" src="__INDEX__/layui/assets/province.js"></script>

    <script type="text/javascript" src="__INDEX__/layui/assets/data.js"></script>
    <script type="text/javascript" src="__INDEX__/layui/assets/province.js"></script>
    <script type="text/javascript">
        var defaults = {
            s1: 'provid',
            s2: 'cityid',
            s3: 'areaid',
            v1: null,
            v2: null,
            v3: null
        };

    </script>
</head>
<style type="text/css">
    .col-sm-2 {
        width: 6.66666667%;
    }
    .gray-bg{
        background-color: #FFF;
    }
    .input-group .form-control {
        position: relative;
        z-index: 2;
        float: right;
        width: 25%;
        margin-bottom: 0;

    }

</style>
<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">

            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    添加商品
                </div>
                <form>
                <div class="fen" style="border-style:solid solid none;border-image: none;border-width: 1px 0;border-color: #e7eaec;"></div>
                <div class="group" style="margin: 10px 0px;float: left;width: 50%">
                    <label class="labels" style="font-size: 16px">商品名称:</label>
                    <input type="text" class="nsmes" placeholder="请输入商品名称"  value="" >
                </div>
                <div class="group" style="margin: 10px 0px;float: left;width: 50%">
                    <label class="labels" style="font-size: 16px;margin-left: 117px">分类:</label>
                    <select  style="width: 29%;margin-left: 21px;height: 25px;"  id="supplier_id" name="cate_id" onchange="handleFirst(this)">
                        <option value="2" >==请选择==</option>
                        {volist name="cate" id="v" }
                        <option value="{$v.id}" >{$v.name}</option>
                        {volist name="v['second']" id="vd"}
                        <option value="{$vd.id}" >--|{$vd.name}</option>
                        {/volist}
                        {/volist}
                    </select>
                    <!--<input type="text" class="nsmes" placeholder="请输入商品名称"  value="" >-->
                </div>
                <div class="ibox-content">
                    <div class="demo-title">注：添加商品属性时请先添加一级属性，再添加二级属性，最后勾选！</div>

                    <button class="cloneSku" style="border: 1px solid rgb(53,87,114);height: 27px;background: rgb(53,87,114);color:#fff">添加自定义sku属性</button>

                    <!--一级属性+第一个二级属性         sku模板,用于克隆,生成自定义sku-->
                    <div id="skuCloneModel" style="display: none;">
                        <div class="clear"></div>
                        <ul class="SKU_TYPE">
                            <li is_required='0' propid='' sku-type-name="">
                                <a href="javascript:void(0);" class="delCusSkuType">移除</a>
                                <input type="text" class="cusSkuTypeInput" placeholder="请输入一级属性名称" />：                                               <!--一级栏目input框-->
                            </li>
                        </ul>
                        <ul>
                            <li>
                                <input type="checkbox" class="model_sku_val"  propvalid='' value="" />
                                <input type="text" class="cusSkuValInput" placeholder="请输入二级属性名称，然后选中当前"/>
                            </li>
                            <button class="cloneSkuVal" style="border: 1px solid rgb(129,148,170);height: 27px;background: rgb(129,148,170);color:#fff">添加自定义属性值</button>
                        </ul>
                        <div class="clear"></div>
                    </div>
                    <!--=第2个二级属性(单个sku值克隆模板)-->
                    <li style="display: none;" id="onlySkuValCloneModel">
                        <input type="checkbox" class="model_sku_val"  propvalid='' value="" />
                        <input type="text" class="cusSkuValInput" placeholder="请输入二级属性名称，然后选中当前"/>
                        <a href="javascript:void(0);" class="delCusSkuVal">删除</a>
                    </li>
                    <div class="clear"></div>
                    <div id="skuTable"></div>
                    <button class="getSetSkuVal">提交</button>
                </div>

                <div style="width: 100%;margin-top: 10px;border-style:solid solid none;border-image: none;border-width: 1px 0;border-color: #e7eaec;">
                    <div class="group" style="margin: 10px 0px;width: 50%;float: left">
                        <label class="labels" style="font-size: 16px">商品价格:</label>
                        <input type="text" class="nsmes" placeholder="请输入商品价格"  value="" >
                    </div>
                    <div class="group" style="margin: 10px 0px;float: left;width: 50%">
                        <label class="labels" style="font-size: 16px;margin-left: 117px">商品原价:</label>
                        <input type="text" class="nsmes" placeholder="请输入商品原价"  value="" >
                    </div>
                </div>

                <div style="width: 100%">
                    <div class="group" style="margin: 10px 0px;width: 50%;float: left">
                        <label class="labels" style="font-size: 16px">限购数量:</label>
                        <input type="text" class="nsmes" placeholder="请输入限购数量"  value="" >
                    </div>
                    <div class="group" style="margin: 10px 0px;float: left;width: 50%">
                        <label class="labels" style="font-size: 16px;margin-left: 117px">所属专区:</label>
                        <select  style="width: 29%;margin-left: 21px;height: 25px;"   name="cate_id" onchange="handleFirst(this)">
                            <option value="2" >==请选择==</option>
                            <option value="0" >昨日爆款</option>
                            <option value="1" >今日主推</option>
                            <option value="2" >其他</option>
                        </select>
                        <!--<input type="text" class="nsmes" placeholder="请输入商品名称"  value="" >-->
                    </div>
                </div>
                <div style="width: 100%">
                    <div class="group" style="margin: 10px 0px;width: 30%;float: left">
                        <label class="labels" style="font-size: 16px">三级分销金额:</label>
                        <input type="text" class="nsmes" style="width: 64px" placeholder="一级"  value="" >
                        <input type="text" class="nsmes" style="width: 64px" placeholder="二级"  value="" >
                        <input type="text" class="nsmes" style="width: 64px" placeholder="三级"  value="" >
                    </div>
                    <div class="group" style="margin: 10px 0px;float: left;width: 25%">
                        <label class="labels" style="font-size: 16px;margin-left: 0px">是否可使用优惠券:</label>
                        <input id="checs"  type="checkbox" class="js-switch"  />
                    </div>
                    <script>
                        var iszs=0;
                        //                    console.log($(".switchery"));
                        $("#checs").change(function () {
                        console.log($(this)[0].checked);
                            if($(this)[0].checked==true){
                                iszs=1;
                            }else{
                                iszs=0;
                            }
                        });

                    </script>
                    <div class="group" style="margin: 10px 0px;float: left;width: 45%">
                        <label class="labels" style="font-size: 16px;margin-left: 27px">赠送优惠券:</label>
                        <select  style="width: 29%;height: 25px;;margin-left: 14px"   name="cate_id" onchange="handleFirst(this)">
                            <option value="2" >==请选择==</option>
                            {volist name="coupon" id="v1" }
                            <option value="{$v1.id}" >{$v1.name}</option>
                            {/volist}
                        </select>
                        <!--<input type="text" class="nsmes" placeholder="请输入商品名称"  value="" >-->
                    </div>

                </div>

                    <div class="groups" style="width: 50%;height: 50%">
                        <label class="jifen" style="font-size: 16px">赠送积分:</label>
                        <input type="text" class="zfen" placeholder="请输入赠送积分"  value="" >
                    </div>




                <div class="fen" style="margin: 10px 0px;border-style:solid solid none;border-image: none;border-width: 1px 0;border-color: #e7eaec;">
                </div>
                <div class="layui-form-item" id="pics">
                    <div class="layui-input-block" style="width: 70%;">
                        <div class="layui-upload">
                            <button type="button" class="layui-btn layui-btn-primary pull-left" id="slide-pc">轮播图</button>
                            <div class="pic-more">
                                <ul class="pic-more-upload-list" id="slide-pc-priview">
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="fen" style="border-style:solid solid none;border-image: none;border-width: 1px 0;border-color: #e7eaec;">
                </div>
                <div class="group" style="margin: 10px 0px;width: 100%;">
                    <div>
                        <label class="labels" style="font-size: 16px">商品详情:</label>
                    </div>
                    <textarea id="editor" name="editors"  type="text/plain" style="width:1024px;height:500px;"></textarea>
                </div>
                <div class="fen" style="border-style:solid solid none;border-image: none;border-width: 1px 0;border-color: #e7eaec;">
                </div>
                <div>
                <div class="group" style="margin: 10px 0px;width: 50%;float: left">
                    <label class="labels" style="font-size: 16px">开始时间:</label>
                    <input type="text" id="startTime" placeholder='开始时间'>
                    <!--<input type="text" class="nsmes" placeholder="开始时间"  value="" >-->
                </div>
                <div class="group" style="margin: 10px 0px;float: left;width: 50%">
                    <label class="labels" style="font-size: 16px;margin-left: 117px">结束时间:</label>
                    <input type="text" id="endTime" placeholder='结束时间'>
                    <!--<input type="text" class="nsmes" placeholder="结束时间"  value="" >-->
                </div>

                </div>
                    <div class="group" style="margin: 10px 0px;width: 100%;">
                        <label class="labels" style="font-size: 16px">固定身份购买:</label>
                        <select  style="width: 29%;height: 25px;"   name="cate_id" onchange="handleFirst(this)">
                            <option value="" >固定身份</option>
                        </select>
                    </div>
                <div class="group" style="margin: 10px 0px;width: 100%">
                    <label class="labels" style="font-size: 16px">购买后是否升级总代:</label>
                    <input id="chec"  type="checkbox" class="js-switch_3"  />
                </div>


                <script>
                      var isz=0;
//                    console.log($(".switchery"));
                    $("#chec").change(function () {
                        console.log($(this)[0].checked);
                        if($(this)[0].checked==true){
                             isz=1;
                        }else{
                            isz=0;
                        }
//                        alert(isz);
                    });

//                    if($("#chec").is(':checked')){
//                      alert(222);
//                    }else{
//                        alert(11111);
//                    }
//                    var ss =$("#chec").attr('checked');
//                    alert(ss);
//                    $("#cb1").attr("checked","checked")val();
//                    var aa = $("input[type='checkbox']").val();
//                    alert(11);
                </script>
                <div class="group" style="margin: 10px 0px;width: 100%">
                    <label class="labels" style="font-size: 16px">运费:</label>
                    <input type="text" class="nsmes" style="width: 64px" placeholder="请输入统一运费"  value="" >
                </div>
                <div class="group" style="margin: 10px 0px;width: 100%">


                        <label class="labels" style="font-size: 16px">其他运费:</label>
                        <div class="layui-form-item">
                            <div class="layui-input-inline">
                                <select class="province_freight_tip" id="province_freight_tip" lay-search="" lay-skin="select" lay-filter="province_freight_tip" lay-verify="required" onchange="handleFirst(this)">
                                    <option value="">请选择省</option>
                                    {volist name="province" id="v"}
                                    <option value="{$v.id}">{$v.name}</option>
                                    {/volist}
                                </select>
                            </div>
                            <div class="layui-input-inline">
                                <select name="city_freight_tip" class="city_freight_tip" id="city_freight_tip" lay-verify="required">
                                    <option value="">请选择市</option>
                                </select>
                            </div>

                            <div class="layui-input-inline">
                                <input type="text" placeholder="运费" class="layui-input money" id="money" lay-verify="required"/>
                            </div>
                            <button onclick="addArea()" class="layui-btn" >添加邮费</button>
                            <table class="layui-table" id="_table">
                                <thead>
                                <tr>
                                    <th>省</th>
                                    <th>市</th>
                                    <th>邮费</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                            </table>
                            <!--<input type="text" class="nsmes" style="width: 64px" placeholder="运费"  value="" >-->
                        </div>




                </div>
                <div class="group" style="margin: 10px 0px;width: 100%">
                    <label class="labels" style="font-size: 16px">上下架:</label>
                    <input  type="radio"  id="is_hot1" name="is_hot" class="ishot" value="1">是
                    <input  type="radio" id="is_hot" name="is_hot" class="ishot" value="0">否
                </div>
                </form>
            </div>
        </div>
    </div>
</div>

</body>
<script>
    /*选择省份*/
    function handleFirst(obj){
        var pro_id = $(obj).find("option:selected").val();
        var url = "{:url('goodslist/city')}";
        var that = $(obj);
        $.post(url, {pro_id: pro_id}, function (data) {
            var html = "";
            html +='<option value="">请选择市</option>';
            if(data.length!=0){
                console.log(data);
                $.each(data, function (idx, obj) {
                    console.log(obj.id);
                    html +='<option value="'+obj.id+'">'+obj.name+'</option>';
                })
            }
            that.parent().parent().find('#city_freight_tip').html(html);
        });
    }
    /*添加特殊运费*/
    function addArea() {
        var province_freight_tip = $("#province_freight_tip").val();
        var city_freight_tip = $("#city_freight_tip").val();
        var money = $("#money").val();
//        alert(province_freight_tip +" 市   "+city_freight_tip);
        var freight_city = $(".freight_city");
        var checkRes = "";
        if (province_freight_tip === 0 || city_freight_tip.length === 0 || money.length === 0){
            layer.alert("省市运费请不要为空",{icon:5});
        }else{
            $.ajax({
                url: "getName",
                data: {
                    province_id:province_freight_tip,
                    city_id:city_freight_tip
                },
                type: 'POST',
                dataType: 'json',
                success: function(res) {
                    for(var i=0;i<freight_city.length;i++){
                        if(freight_city[i].value === res.city_name){
                            layer.alert("请不要重复添加特殊地区运费",{icon:5});
                            checkRes += freight_city[i].value+",";
                        }
                    }
                    if(checkRes === ""){
                        var td = $(" <tbody>" +
                            "<tr>" +
                            "<td><input type='hidden' class='freight_pro' value='"+res.provin.name+"'/>"+res.pro_name+"</td>" +
                            "<td><input type='hidden' class='freight_city' value='"+res.city.name+"'/>"+res.city_name+"</td>" +
                            "<td><input type='hidden' class='freight_money' value='"+money+"'/>￥"+money+"</td>" +
                            "<td class='delData'>删除</td>" +
                            "</tr>" +
                            "</tbody>");
                        $("#_table").append(td);
                    }
                }
            });
        }
    }

    //  	点击删除
    $("#_table").on("click",".delData",function(){
        $(this).parent().remove();
    });

    var ue = UE.getEditor("editor");

    function changeDate(){
        var date = new Date();
        var y = date.getFullYear();
        var m = date.getMonth()+1;
        m = m<10 ? ('0'+ m) :m;
        var d = date.getDate();
        d = d<10 ? ('0'+ d) :d;
        var h = date.getHours();
        h = h<10 ? ('0'+ h) :h;
        var i = date.getMinutes();
        i = i<10 ? ('0'+ i) :i;
        var s = date.getSeconds();
        s = s<10 ? ('0'+ s) :s;
        return y+'-'+m+'-'+d+' '+h+':'+i+':'+s;
    }
    var now = changeDate();
    //console.log(now);
    /*时间插件*/
    var startTime =laydate.render({
        elem: '#startTime',
        type: 'datetime',
        min: 0,
        max: '2035-12-31 12:30:00',
        done: function(value, date, endDate) {
            endLayDate.config.min = {
                year: date.year,
                month: date.month - 1,
                date: date.date,
                hours: date.hours,
                minutes: date.minutes,
                seconds: date.seconds +1
            };
        }
    });
    /*时间插件*/
    var endLayDate = laydate.render({
        elem: '#endTime',
        type: 'datetime',
        max: '2035-12-31 12:30:00',
        btns: ['clear', 'confirm'],  //clear、now、confirm
        done: function(value, date, endDate) {
            startTime.config.max = {
                year: date.year,
                month: date.month - 1,
                date: date.date,
                hours: date.hours,
                minutes: date.minutes,
                seconds: date.seconds -1
            };
        }
    });
    layui.use('upload', function(){
        var $ = layui.jquery;
        var upload = layui.upload;
        upload.render({
            elem: '#slide-pc',
            url: "{:url('index/uploads')}",
            size: 60,
            exts: 'jpg|png|jpeg',
            multiple: true,
            before: function(obj) {
                layer.msg('图片上传中...', {
                    icon: 16,
                    shade: 0.01,
                    time: 0
                })
            },
            done: function(res) {
                console.log(res);
                layer.close(layer.msg());//关闭上传提示窗口
                if(res.status == 0) {
                    return layer.msg(res.message);
                }
                //$('#slide-pc-priview').append('<input type="hidden" name="pc_src[]" value="' + res.filepath + '" />');
                $('#slide-pc-priview').append('<li class="item_img"><div class="operate"><i class="toleft layui-icon"></i><i class="toright layui-icon"></i><i  class="close layui-icon"></i></div><img src="' + res.filepath + '" style="width: 150px;height: 150px" class="img" ><input type="hidden" name="pics[]" value="' + res.filepath + '" /></li>');
            }
        });
    });
    //点击多图上传的X,删除当前的图片
    $("body").on("click",".close",function(){
        $(this).closest("li").remove();
    });
    //多图上传点击<>左右移动图片
    $("body").on("click",".pic-more ul li .toleft",function(){
        var li_index=$(this).closest("li").index();
        if(li_index>=1){
            $(this).closest("li").insertBefore($(this).closest("ul").find("li").eq(Number(li_index)-1));
        }
    });
    $("body").on("click",".pic-more ul li .toright",function(){
        var li_index=$(this).closest("li").index();
        $(this).closest("li").insertAfter($(this).closest("ul").find("li").eq(Number(li_index)+1));
    });
    /*
    省市区
    */
    //初始数据
    var areaData = Area;
    var $form;
    var form;
    var $;
    layui.use(['jquery', 'form'], function() {
        $ = layui.jquery;
        form = layui.form();
        $form = $('form');
        loadProvince();
    });
    //加载省数据   '_' + areaData[i].mallCityList.length + '_' + i +
    function loadProvince() {
        var proHtml = '';
        for (var i = 0; i < areaData.length; i++) {
            proHtml += '<option value="' + areaData[i].provinceCode + '_' + areaData[i].mallCityList.length + '_' + i +'">' + areaData[i].provinceName + '</option>';
        }
        //初始化省数据
        $form.find('select[name=province]').append(proHtml);
        form.render();
        form.on('select(province)', function(data) {
            $form.find('select[name=area]').html('<option value="">请选择县/区</option>').parent().hide();
            var value = data.value;
            var d = value.split('_');
            var code = d[0];
            var count = d[1];
            var index = d[2];
            if (count > 0) {
                loadCity(areaData[index].mallCityList);
            } else {
                $form.find('select[name=city]').parent().hide();
            }
        });
    }
    //加载市数据   '_' + citys[i].mallAreaList.length + '_' + i +
    function loadCity(citys) {
        var cityHtml = '';
        for (var i = 0; i < citys.length; i++) {
            cityHtml += '<option value="' + citys[i].cityCode + '_' + citys[i].mallAreaList.length + '_' + i +'">' + citys[i].cityName + '</option>';
        }
        $form.find('select[name=city]').html(cityHtml).parent().show();
        form.render();
        form.on('select(city)', function(data) {
            var value = data.value;
            var d = value.split('_');
            var code = d[0];
            var count = d[1];
            var index = d[2];
            if (count > 0) {
                loadArea(citys[index].mallAreaList);
            } else {
                $form.find('select[name=area]').parent().hide();

            }
        });
    }

    $(".getSetSkuVal").click(function () {
        var testArray=[];
        $("tr[class*='sku_table_tr']").each(function(){
            var obj={propnames:'',propvalnames:'',img:'',part_coding:'',trade_price:'',channel_price:'',core_price:'',atr_num:''};
            //obj.proImg=$("#setting_img").prop("files");        //图片
            obj.img=$(this).find("input[type='file'][class*='setting_img']").attr('img-url');        //图片
            obj.part_coding=$(this).find("input[type='text'][class*='setting_part_coding']").val();        //图片
            obj.trade_price = $(this).find("input[type='text'][class*='setting_trade_price']").val();  //批发价
            obj.channel_price= $(this).find("input[type='text'][class*='setting_channel_price']").val(); //渠道价
            obj.core_price= $(this).find("input[type='text'][class*='setting_core_price']").val(); //核心价
            obj.atr_num = $(this).find("input[type='text'][class*='setting_sku_stock']").val();//SKU库存
            obj.propnames= $(this).attr("propnames");  //一级属性名称
            obj.propvalnames= $(this).attr("propvalnames");  //二级属性名称
            testArray.push(obj);
        });
        console.log(testArray);
    })
</script>
</html>